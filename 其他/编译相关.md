<font face="微软雅黑" size="4" >
<font size="6">编译</font>


## 动态/静态语言

计算机语言分为两组：静态语言和动态语言

### 静态语言（强类型语言） 
静态语言

静态语言：通常编译成目标机器的本地机器代码（或汇编代码）程序，该程序在运行时直接由硬件执行。  
动态语言：由解释器执行，不产生机器语言代码。

## 1 安卓编译

### 解释执行
众所周知，大多数的 Android 应用都是由 Java 开发而成，而 Java 代码的执行依赖于 Java 虚拟机（JVM），其提供了字节码文件（.class）的运行环境支持，即在 Java 程序编译成 .class 文件之后，由 JVM 将程序解释给本地系统执行，其中，后者的过程通常被叫做「解释执行」

### 编译执行
这种模式主要分为两种：

JIT（Just-in-time，即时编译），边运行边编译；

AOT（Ahead-Of-Time，运行时编译），在程序运行前编译，可以避免在运行时的编译性能消耗和内存消耗。

### 应用
就 Android 系统而言，首次引入 JIT 功能是在 Android 2.2 版本中，彼时Google 的目的是为了提高 Android 的运行速度，即当 App 运行时，JIT 编译器就会对新类进行编译，经过编译后的代码，会被优化成相当精简的原生型指令码，这样在下次执行到相同逻辑的时候，速度就会更快。不过好景不长，JIT 在运行时编译开销大，容易造成卡顿，所以在 4.4 版本之后，Dalvik 虚拟机被逐渐抛弃的过程中，JIT 也被弃用了。  

而在随后的 Android 5.0 系统中，ART 正式取代了 Dalvik，ART 中完全抛弃了 JIT，使用的是 AOT 的编译方式，这种方式的好处是，当 App 在第一次安装时，字节码会预先编译成原型指令码，让其成为真正的本地应用，这样App 的启动及运行速度都会大幅提升。不过这种方式也存在巨大的缺陷，一是安装应用时需要全面编译，用户等待安装的时间过长；二是安装过程中翻译出来的机器码占用了大量的内存空间。

### 进化
因此，Google 为在安装时间、内存占用、电池消耗和性能之间获得折中方案，又于 Android 7.0 版本重新加入了 JIT 编译模式，即当前的 Android 系统引入的是包含编译、解释和 JIT 的混合运行时。详细而言，当 App 安装时，首先不用像 Android 6.0 中对应用进行完整的预编译，而会根据 JIT 编译器的分析结果，一方面，在设备充电或其余空闲时间对「cold code」进行解释；另一方面，对「hot code」在实际使用时由 JIT 进行编译。


## 参考文献

1. [助力 Android 抗衡 iOS，华为发布方舟编译器！](https://mp.weixin.qq.com/s/zF3nET-opa3XKkxbX9ERZg)
2. [静态语言和动态语言的区别](https://www.cnblogs.com/raind/p/8551791.html)
</font>
